<!--
Copyright (c) 2015 DudeTeam. All rights reserved.
Authored by Maxime Perrimond <max.perrimond@gmail.com>
-->
<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="demo-panel.html">
<link rel="import" href="demo-other-panel.html">
<link rel="import" href="../magnet-editor.html">

<dom-module id="demo-editor">

    <style>
        :host {
            display: flex;
            flex: 1;
        }
    </style>

    <template>
        <content></content>
    </template>

    <script>
        Polymer({
            is: "demo-editor",

            properties: {
                config: {
                    type: Object,
                    value: {
                        type: "dock",
                        horizontal: true,
                        sub: [
                            {
                                type: "dock",
                                sub: [
                                    {
                                        type: "block",
                                        sub: [
                                            {
                                                type: "panel",
                                                title: "Panel 1",
                                                panel: "DemoPanel"
                                            },
                                            {
                                                type: "panel",
                                                title: "Panel 2",
                                                panel: "DemoOtherPanel"
                                            }
                                        ]
                                    },
                                    {
                                        type: "block",
                                        sub: [
                                            {
                                                type: "panel",
                                                title: "Panel 3",
                                                panel: "DemoPanel"
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                type: "dock",
                                sub: [
                                    {
                                        type: "block",
                                        sub: [
                                            {
                                                type: "panel",
                                                title: "Panel 4",
                                                panel: "DemoPanel"
                                            }
                                        ]
                                    },
                                    {
                                        type: "block",
                                        selected: 1,
                                        sub: [
                                            {
                                                type: "panel",
                                                title: "Panel 5",
                                                panel: "DemoPanel"
                                            },
                                            {
                                                type: "panel",
                                                title: "Panel 6",
                                                panel: "DemoPanel"
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                }
            },

            ready: function () {
                var editor = new MagnetEditor();
                Polymer.dom(this).appendChild(editor);
                editor.config = this.config;
                editor.load();
                editor.flush();
                this._width = window.innerWidth;
                this._height = window.innerHeight;
                window.addEventListener("resize", function () {
                    var deltaX = window.innerWidth - this._width;
                    var deltaY = window.innerHeight - this._height;
                    this._width = window.innerWidth;
                    this._height = window.innerHeight;
                    editor.resizeEditor(deltaX, deltaY);
                }.bind(this));
            }
        });
    </script>

</dom-module>