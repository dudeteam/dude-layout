<!--
Copyright (c) 2015 DudeTeam. All rights reserved.
Authored by Maxime Perrimond <max.perrimond@gmail.com>
-->
<link rel="import" href="../polymer/polymer.html">

<dom-module id="dude-layout-separator">

    <style>
        :host {
            display: flex;
            flex: 0 0 var(--dude-layout-separator-size);
            white-space: nowrap;
            z-index: 2;
            width: auto;
            cursor: row-resize;

            @apply(--dude-layout-separator);
        }

        :host([horizontal]) {
            height: auto;
            cursor: col-resize;

            @apply(--dude-layout-separator-h);
        }

        :host([thin]) {
            flex: 0 0 var(--dude-layout-thin-separator-size);
        }

    </style>

    <template>
    </template>

    <script>
        DudeLayoutSeparator = Polymer({
            is: "dude-layout-separator",

            properties: {
                horizontal: {
                    type: Boolean,
                    value: false,
                    reflectToAttribute: true
                },

                thin: {
                    type: Boolean,
                    value: false,
                    reflectToAttribute: true
                }
            },

            listeners: {
                track: 'track',
                down: 'preventSelection'
            },

            track: function(e) {
                var value = e.detail[(this.horizontal) ? "ddx" : "ddy"];
                var previousOrigin = (this.horizontal) ? "right" : "bottom";
                var nextOrigin = (this.horizontal) ? "left" : "top";

                if (this.previousElementSibling.isResizable(value, previousOrigin) &&
                        this.nextElementSibling.isResizable(-value, nextOrigin)) {
                    this.previousElementSibling.resize(value, previousOrigin);
                    this.nextElementSibling.resize(-value, nextOrigin);
                }
            },

            preventSelection: function(e) {
                e.preventDefault();
            }
        });
    </script>

</dom-module>